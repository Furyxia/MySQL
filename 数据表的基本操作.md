# 数据表的基本操作

## 1.创建数据表

### 1.1 创建表的语法形式

数据表属于数据库，在创建数据表之前，应该使用语句“USE <数据库名>”指定操作的数据库；

若没有选择数据库，将抛出"No database selected"的错误！

创建数据表的语句为CREATE TABLE，语法规则如下：

```
CREATE TABLE<表名>
(
字段1, 数据类型 [列级别数据约束] [默认值],
字段2, 数据类型 [列级别数据约束] [默认值],
.....
[表级别约束条件]
);
```

使用CREATE TABLE创建表时，必须指定以下信息：
1. 要创建的表的名称，不区分大小写，不能使用SQL语言中的关键字，如DROP，ALTER，INSERT等；
2. 数据表中每一个列（字段）的名称和数据类型，若要创建多个列，要用逗号隔开；

**示例：**

首先创建数据库：

```
CREATE DATABASE test_db;
```

选择创建表的数据库：

```
USE test_db;
```

创建tb_emp1表：

```
create table tb_emp1
(
id INT(11),
name VARCHAR(25),
deptId INT(11),
salary FLOAT
);
```

<br>

### 1.2 使用主键约束

主键，又称主码，是表中一列或多列的组合。

主键约束要求**主键列的数据唯一，并且不允许为空**。

主键能够唯一地标识表中的一条记录，可以结合外键来定义不同数据列表之间的关系，并且可以加快数据库查询速度。

主键有两种类型：**单字段主键**和**多字段联合主键**

**单字段主键**：由一个字段组成，有两种格式：

1.在定义列的同时指定主键：`字段名 数据类型 PRIMARY KEY [默认值]`

例如：

```
CREATE TABLE tb_emp2
(
id INT(11) PRIMARY KEY,
name VARCHAR(25),
deptId INT(11),
salary FLOAT
);
```

2.在定义完所有列之后指定主键：`[CONSTRAINT <约束名>] PRIMARY KEY [字段名]`

例如：

```
CREATE TABLE rb_emp3
(
id INT(11),
name VARCHAR(25),
deptId INT(11),
salary FLOAT,
PRIMARY KEY(id)
)
```

**多字段联合主键**：主键由多个字段联合组成，语法规则如下：`PRIMARY KEY [字段1, 字段2, ..., 字段n]`

例如：

```
CREATE TABLE tb_emp4
(
name VARCHAR(25),
deptId INT(11),
salary FLOAT,
PRIMARY KEY(name, deptId)
);
```

该语句执行之后，便创建了一个名为tb_emp4的数据表，且name和deptId字段组成tb_emp4的多字段联合主键。

<br>

### 1.3 使用外键约束

外键用来在两个表的数据之间建立链接，它可以是一列或多列。一个表可以有一个或多个外键。外键对应的是参照完整性，一个表的外键可以为空值，若不为空值，则每一个外键必须等于另一个表中主键的某个位置。

**外键**：首先它是表中的一个字段，它可以不是本表的主键，但对应另外一个表的主键。作用是保持作用的一致性，完整性

外键主要作用是保证数据引用的完整性，定义外键后，不允许删除在另一个表中具有关联关系的行。

**主表（父表）**：对两个具有关联关系的表而言，相关联字段中主键所在的表即是主表。

**从表（子表）**：对于两个具有关联关系的表而言，相关联字段中外键所在的表即是从表。


外键约束的语法规则如下：

```
[CONSTRAINT <外键名>] FOREIGN KEY 字段名1 [ ,字段名2, ...]
REFERENCES <主表名> 主键列1 [ ,主键列2, ...]
```

“外键名”为定义的外键约束的名称，一个表中不能有相同名称的外键；

“字段名”表示子表需要添加外键约束的字段列；

“主表名”即使被子表外键所依赖的表的名称；

“主键列”表示主表中定义的主键列，或者列组合；

**示例：**创建一个部门表tb_dept1


```
CREATE TABLE tb_dept1
(
id INT(11),
name VARCHAR(22) NOT NULL,
location VARCHAR(50)
);
```

定义数据表tb_emp5，让它的键depId作为外键关联到tb_dept1的主键id：

```
CREATE TABLE tb_emp5
(
id INT(11) PRIMARY KEY,
name VARCHAR(25),
deptId INT(11),
salary FLOAT,
CONSTRAINT fk_emp_dept1 FOREIGN KEY(deptId) REFERENCES tb_dept1(id)
);
```

以上语句执行成功之后，在表tb_emp5上添加了名称为fk_emp_dept1的外键约束，外键名称为deptId，其以来与表tb_dept1的主键id。

